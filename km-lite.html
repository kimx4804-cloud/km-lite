<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>km-lite — RECAP 20개국 자동수집</title>

<style>
:root{
  --bg:#0b0f14; --fg:#e6eef8; --mut:#8aa0bb; --line:#253245;
}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,Arial,sans-serif;
  background:var(--bg); color:var(--fg);
  margin:0; padding:16px;
}
h2{ margin:0 0 14px }
input,button,textarea{
  background:#0e1520; border:1px solid var(--line);
  color:var(--fg); border-radius:8px;
  padding:6px 10px; font-size:14px;
}
button{ cursor:pointer }
.small{ font-size:12px; color:var(--mut) }
.flex{ display:flex; align-items:center; gap:8px; flex-wrap:wrap }
.badge{
  padding:2px 6px; border-radius:999px; border:1px solid var(--line);
  font-size:11px; color:var(--mut); margin-right:4px;
}
.card{
  border:1px solid var(--line); border-radius:8px;
  padding:10px; margin-top:8px; background:#101826;
}
#rw-table-wrap{
  max-height:400px; overflow:auto; margin-top:10px;
  border:1px solid var(--line); border-radius:8px;
}
table{ width:100%; border-collapse:collapse; font-size:13px }
th,td{
  border:1px solid var(--line); padding:6px;
  vertical-align:top;
}
.title-cell{ cursor:pointer; text-decoration:underline }
.modal{
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,0.55);
  justify-content:center; align-items:center;
  z-index:50;
}
.modal-box{
  background:#101826; border:1px solid var(--line);
  border-radius:10px; padding:16px;
  max-width:800px; width:90%; max-height:80%;
  overflow:auto;
}
.hbar{ height:8px; border-radius:4px; background:#182330; margin:4px 0; overflow:hidden }
.hbar span{ height:100%; display:inline-block }
.hcol-H{ background:#3aa3ff }
.hcol-D{ background:#61d661 }
.hcol-P{ background:#f2b45a }

/* Country popup */
#country-modal .modal-box{
  max-width:600px;
}
.country-grid{
  display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:6px; margin-top:10px;
}
</style>
</head>
<body>

<h2>RECAP 경량 지식관리체계 (20개국 자동수집 · 요약 · HDP · C1~C15)</h2>
<div class="small">로컬 서버에서 여세요: <span style="font-family:monospace">py -m http.server 8000</span></div>

<hr/>

<div class="small">
대상국: Burundi, CAR, Comoros, Guinea, Kenya, Mali, STP, Somalia, South Sudan,
Zimbabwe, Armenia, Iran, Jordan, Lebanon, Palestine, Syria, Yemen,
PNG, Solomon Islands, Timor-Leste
</div>

<hr/>

<div class="flex">
  <div>
    <label>최근 일수</label><br/>
    <input id="rw-days" type="number" value="365" style="width:90px"/>
  </div>
  <div>
    <label>최대 개수</label><br/>
    <input id="rw-limit" type="number" value="300" style="width:90px"/>
  </div>
  <button id="rw-open-country">국가 필터</button>
  <span id="rw-country-chip" class="badge">전체(20)</span>
  <button id="rw-fetch">가져오기</button>
  <span id="rw-status" class="small"></span>
</div>

<div id="rw-table-wrap">
  <div id="rw-out" class="small" style="padding:8px">아직 불러온 항목이 없습니다.</div>
</div>

<button id="rw-save" style="margin-top:8px">선택 항목 노트로 저장</button>
<div id="rw-log" class="small" style="color:#ffb4b4;margin-top:6px"></div>

<hr/>

<div>
  <div class="flex">
    <strong>저장된 노트</strong>
    <input id="notes-q" placeholder="검색" style="flex:1;min-width:180px"/>
    <button id="notes-refresh">새로고침</button>
    <button id="notes-clear">전체삭제</button>
  </div>
  <div id="notes-list" style="margin-top:10px"></div>
</div>

<!-- Summary modal -->
<div id="summary-modal" class="modal">
  <div class="modal-box">
    <div id="summary-title" style="font-size:18px;font-weight:bold;margin-bottom:8px"></div>
    <div id="summary-meta" class="small" style="margin-bottom:6px"></div>
    <div id="summary-hdp"></div>
    <div id="summary-body" style="margin-top:6px;white-space:pre-wrap"></div>
    <div style="text-align:right;margin-top:10px">
      <button id="summary-close">닫기</button>
    </div>
  </div>
</div>

<!-- Country modal -->
<div id="country-modal" class="modal">
  <div class="modal-box">
    <strong>국가 선택</strong>
    <div class="small">ISO3 기준</div>
    <div id="country-grid" class="country-grid"></div>
    <div class="flex" style="justify-content:flex-end;margin-top:10px">
      <button id="country-clear">초기화</button>
      <button id="country-apply">적용</button>
      <button id="country-close">닫기</button>
    </div>
  </div>
</div>
